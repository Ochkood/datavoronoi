{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/ochirdari/Desktop/datanewsapp/datavoronoi/lib/api.ts"],"sourcesContent":["import type { AuthUser } from \"@/lib/auth\"\nimport { getAccessToken } from \"@/lib/auth\"\nimport type { PostData } from \"@/components/post-card\"\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\"\nconst API_ORIGIN = API_BASE.replace(/\\/api\\/?$/, \"\")\n\ntype ApiResponse<T> = {\n  success: boolean\n  message?: string\n  data: T\n}\n\ntype BackendPost = {\n  _id: string\n  title: string\n  excerpt?: string\n  content?: string\n  featuredImage?: string\n  status?: \"draft\" | \"pending\" | \"published\" | \"rejected\"\n  visibility?: \"public\" | \"private\"\n  createdAt?: string\n  publishedAt?: string\n  viewsCount?: number\n  likesCount?: number\n  commentsCount?: number\n  author?: {\n    _id?: string\n    name?: string\n    avatar?: string\n  }\n  category?: {\n    _id?: string\n    name?: string\n    slug?: string\n  }\n  topics?: Array<{\n    _id: string\n    name: string\n    slug: string\n  }>\n}\n\nexport type BackendCategory = {\n  _id: string\n  name: string\n  slug: string\n  description?: string\n  icon?: string\n  color?: string\n  bannerImage?: string\n}\n\nexport type BackendTopic = {\n  _id: string\n  name: string\n  slug: string\n  description?: string\n  image?: string\n  featured?: boolean\n  startDate?: string\n  endDate?: string\n}\n\nfunction toRelativeDate(dateString?: string): string {\n  if (!dateString) return \"Саяхан\"\n  const d = new Date(dateString)\n  if (Number.isNaN(d.getTime())) return \"Саяхан\"\n  return d.toLocaleDateString(\"mn-MN\")\n}\n\nfunction categoryColorBySlug(slug?: string): string {\n  const map: Record<string, string> = {\n    economy: \"bg-chart-1/15 text-chart-1\",\n    technology: \"bg-chart-2/15 text-chart-2\",\n    world: \"bg-chart-3/15 text-chart-3\",\n    environment: \"bg-chart-4/15 text-chart-4\",\n    finance: \"bg-chart-5/15 text-chart-5\",\n    health: \"bg-destructive/15 text-destructive\",\n  }\n  return map[slug || \"\"] || \"bg-secondary text-secondary-foreground\"\n}\n\nfunction mapPost(post: BackendPost): PostData {\n  return {\n    id: post._id,\n    title: post.title,\n    excerpt: post.excerpt || \"\",\n    contentHtml: post.content || \"\",\n    category: post.category?.name || \"Бусад\",\n    categorySlug: post.category?.slug || \"\",\n    categoryColor: categoryColorBySlug(post.category?.slug),\n    image: post.featuredImage || \"/placeholder.jpg\",\n    author: post.author?.name || \"Unknown\",\n    authorAvatar:\n      post.author?.avatar ||\n      \"https://api.dicebear.com/9.x/notionists/svg?seed=author\",\n    date: toRelativeDate(post.createdAt),\n    views: String(post.viewsCount || 0),\n    likes: post.likesCount || 0,\n    comments: post.commentsCount || 0,\n  }\n}\n\nexport type DashboardPost = {\n  id: string\n  title: string\n  excerpt: string\n  content: string\n  status: \"draft\" | \"pending\" | \"published\" | \"rejected\"\n  visibility: \"public\" | \"private\"\n  category: string\n  categoryId?: string\n  image: string\n  views: string\n  likes: number\n  comments: number\n  createdAt: string\n  publishedAt?: string | null\n  topics: string[]\n}\n\nexport type AdminPost = {\n  id: string\n  title: string\n  excerpt: string\n  status: \"draft\" | \"pending\" | \"published\" | \"rejected\"\n  image: string\n  views: string\n  comments: number\n  category: string\n  categorySlug?: string\n  author: string\n  authorAvatar: string\n  createdAt: string\n}\n\nexport type AdminUser = {\n  id: string\n  name: string\n  email: string\n  avatar?: string\n  role: \"user\" | \"publisher\" | \"admin\"\n  isActive: boolean\n  joinedAt: string\n  lastActive: string\n  posts: number\n}\n\nexport type PostComment = {\n  id: string\n  content: string\n  createdAt: string\n  user: {\n    name: string\n    avatar: string\n  }\n}\n\nexport type UploadFolder = \"posts\" | \"categories\" | \"topics\" | \"editor\"\n\ntype BackendComment = {\n  _id: string\n  content: string\n  createdAt: string\n  user?: {\n    name?: string\n    avatar?: string\n  }\n}\n\nfunction mapDashboardPost(post: BackendPost): DashboardPost {\n  return {\n    id: post._id,\n    title: post.title,\n    excerpt: post.excerpt || \"\",\n    content: post.content || \"\",\n    status: post.status || \"draft\",\n    visibility: post.visibility || \"public\",\n    category: post.category?.name || \"Бусад\",\n    categoryId: post.category?._id,\n    image: post.featuredImage || \"/placeholder.jpg\",\n    views: String(post.viewsCount || 0),\n    likes: post.likesCount || 0,\n    comments: post.commentsCount || 0,\n    createdAt: post.createdAt || new Date().toISOString(),\n    publishedAt: post.publishedAt || null,\n    topics: (post.topics || []).map((t) => t._id),\n  }\n}\n\nfunction mapAdminPost(post: BackendPost): AdminPost {\n  return {\n    id: post._id,\n    title: post.title,\n    excerpt: post.excerpt || \"\",\n    status: post.status || \"draft\",\n    image: post.featuredImage || \"/placeholder.jpg\",\n    views: String(post.viewsCount || 0),\n    comments: post.commentsCount || 0,\n    category: post.category?.name || \"Бусад\",\n    categorySlug: post.category?.slug || \"\",\n    author: post.author?.name || \"Unknown\",\n    authorAvatar:\n      post.author?.avatar ||\n      \"https://api.dicebear.com/9.x/notionists/svg?seed=author\",\n    createdAt: post.createdAt || new Date().toISOString(),\n  }\n}\n\nasync function request<T>(path: string, init?: RequestInit): Promise<T> {\n  const token = getAccessToken()\n  const res = await fetch(`${API_BASE}${path}`, {\n    ...init,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n      ...(init?.headers || {}),\n    },\n    cache: \"no-store\",\n  })\n\n  const json = await res.json().catch(() => null)\n  if (!res.ok) {\n    throw new Error(json?.message || \"Request failed\")\n  }\n  return json\n}\n\nfunction fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.onload = () => {\n      const raw = reader.result\n      if (typeof raw !== \"string\") {\n        reject(new Error(\"Image read failed\"))\n        return\n      }\n      const base64 = raw.includes(\",\") ? raw.split(\",\")[1] : raw\n      resolve(base64)\n    }\n    reader.onerror = () => reject(new Error(\"Image read failed\"))\n    reader.readAsDataURL(file)\n  })\n}\n\nexport async function loginApi(email: string, password: string) {\n  const res = await request<\n    ApiResponse<{\n      user: AuthUser\n      accessToken: string\n      refreshToken: string\n    }>\n  >(\"/auth/login\", {\n    method: \"POST\",\n    body: JSON.stringify({ email, password }),\n  })\n  return res.data\n}\n\nexport async function registerApi(name: string, email: string, password: string) {\n  const res = await request<\n    ApiResponse<{\n      user: AuthUser\n      accessToken: string\n      refreshToken: string\n    }>\n  >(\"/auth/register\", {\n    method: \"POST\",\n    body: JSON.stringify({ name, email, password }),\n  })\n  return res.data\n}\n\nexport async function getPosts(params?: {\n  category?: string\n  topic?: string\n  q?: string\n  status?: \"all\" | \"draft\" | \"pending\" | \"published\" | \"rejected\"\n  author?: string\n}) {\n  const search = new URLSearchParams()\n  if (params?.category) search.set(\"category\", params.category)\n  if (params?.topic) search.set(\"topic\", params.topic)\n  if (params?.q) search.set(\"q\", params.q)\n  if (params?.status) search.set(\"status\", params.status)\n  if (params?.author) search.set(\"author\", params.author)\n  const suffix = search.toString() ? `?${search.toString()}` : \"\"\n\n  const res = await request<ApiResponse<{ items: BackendPost[] }>>(`/posts${suffix}`)\n  return res.data.items.map(mapPost)\n}\n\nexport async function getPostById(id: string) {\n  const res = await request<ApiResponse<{ post: BackendPost }>>(`/posts/${id}`)\n  return mapPost(res.data.post)\n}\n\nexport async function getDashboardPostById(id: string) {\n  const res = await request<ApiResponse<{ post: BackendPost }>>(`/posts/${id}`)\n  return mapDashboardPost(res.data.post)\n}\n\nexport async function getCategories() {\n  const res = await request<ApiResponse<{ categories: BackendCategory[] }>>(\n    \"/categories\"\n  )\n  return res.data.categories\n}\n\nexport async function createCategoryApi(payload: {\n  name: string\n  slug: string\n  description?: string\n  icon?: string\n  color?: string\n  bannerImage?: string\n}) {\n  const res = await request<ApiResponse<{ category: BackendCategory }>>(\n    \"/categories\",\n    {\n      method: \"POST\",\n      body: JSON.stringify(payload),\n    }\n  )\n  return res.data.category\n}\n\nexport async function updateCategoryApi(\n  id: string,\n  payload: Partial<{\n    name: string\n    slug: string\n    description?: string\n    icon?: string\n    color?: string\n    bannerImage?: string\n  }>\n) {\n  const res = await request<ApiResponse<{ category: BackendCategory }>>(\n    `/categories/${id}`,\n    {\n      method: \"PATCH\",\n      body: JSON.stringify(payload),\n    }\n  )\n  return res.data.category\n}\n\nexport async function deleteCategoryApi(id: string) {\n  await request<ApiResponse<{ message: string }>>(`/categories/${id}`, {\n    method: \"DELETE\",\n  })\n}\n\nexport async function getTopics() {\n  const res = await request<ApiResponse<{ topics: BackendTopic[] }>>(\"/topics\")\n  return res.data.topics\n}\n\nexport async function createTopicApi(payload: {\n  name: string\n  slug: string\n  description?: string\n  image?: string\n  featured?: boolean\n  startDate?: string\n  endDate?: string\n}) {\n  const res = await request<ApiResponse<{ topic: BackendTopic }>>(\"/topics\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  })\n  return res.data.topic\n}\n\nexport async function updateTopicApi(\n  id: string,\n  payload: Partial<{\n    name: string\n    slug: string\n    description?: string\n    image?: string\n    featured?: boolean\n    startDate?: string\n    endDate?: string\n  }>\n) {\n  const res = await request<ApiResponse<{ topic: BackendTopic }>>(`/topics/${id}`, {\n    method: \"PATCH\",\n    body: JSON.stringify(payload),\n  })\n  return res.data.topic\n}\n\nexport async function deleteTopicApi(id: string) {\n  await request<ApiResponse<{ message: string }>>(`/topics/${id}`, {\n    method: \"DELETE\",\n  })\n}\n\nexport async function getBookmarks() {\n  const res = await request<ApiResponse<{ items: BackendPost[] }>>(\n    \"/posts/bookmarks/me\"\n  )\n  return res.data.items.map(mapPost)\n}\n\nexport async function toggleBookmarkApi(postId: string) {\n  const res = await request<ApiResponse<{ bookmarked: boolean }>>(\n    `/posts/${postId}/bookmark`,\n    {\n      method: \"POST\",\n    }\n  )\n  return res.data\n}\n\nexport async function toggleLikeApi(postId: string) {\n  const res = await request<ApiResponse<{ liked: boolean; likesCount: number }>>(\n    `/posts/${postId}/like`,\n    {\n      method: \"POST\",\n    }\n  )\n  return res.data\n}\n\nexport async function getMyEngagement(postId: string) {\n  const res = await request<ApiResponse<{ liked: boolean; bookmarked: boolean }>>(\n    `/posts/${postId}/engagement`\n  )\n  return res.data\n}\n\nexport async function getCommentsApi(postId: string) {\n  const res = await request<ApiResponse<{ comments: BackendComment[] }>>(\n    `/posts/${postId}/comments`\n  )\n  return res.data.comments.map((c) => ({\n    id: c._id,\n    content: c.content,\n    createdAt: c.createdAt,\n    user: {\n      name: c.user?.name || \"Хэрэглэгч\",\n      avatar:\n        c.user?.avatar ||\n        \"https://api.dicebear.com/9.x/notionists/svg?seed=user\",\n    },\n  }))\n}\n\nexport async function addCommentApi(postId: string, content: string) {\n  const res = await request<ApiResponse<{ comment: BackendComment }>>(\n    `/posts/${postId}/comments`,\n    {\n      method: \"POST\",\n      body: JSON.stringify({ content }),\n    }\n  )\n  const c = res.data.comment\n  const mapped: PostComment = {\n    id: c._id,\n    content: c.content,\n    createdAt: c.createdAt,\n    user: {\n      name: c.user?.name || \"Хэрэглэгч\",\n      avatar:\n        c.user?.avatar ||\n        \"https://api.dicebear.com/9.x/notionists/svg?seed=user\",\n    },\n  }\n  return mapped\n}\n\nexport async function getMyPosts(authorId: string) {\n  const search = new URLSearchParams()\n  search.set(\"author\", authorId)\n  search.set(\"status\", \"all\")\n  const res = await request<ApiResponse<{ items: BackendPost[] }>>(\n    `/posts?${search.toString()}`\n  )\n  return res.data.items.map(mapDashboardPost)\n}\n\nexport async function getAdminPosts() {\n  const res = await request<ApiResponse<{ items: BackendPost[] }>>(\n    \"/posts?status=all\"\n  )\n  return res.data.items.map(mapAdminPost)\n}\n\nexport async function uploadImageApi(file: File, folder: UploadFolder) {\n  const dataBase64 = await fileToBase64(file)\n  const res = await request<ApiResponse<{ url: string }>>(\"/uploads/image\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      fileName: file.name,\n      mimeType: file.type,\n      dataBase64,\n      folder,\n    }),\n  })\n\n  const url = res.data.url || \"\"\n  if (!url) throw new Error(\"Upload failed\")\n  if (url.startsWith(\"http://\") || url.startsWith(\"https://\")) return url\n  return `${API_ORIGIN}${url.startsWith(\"/\") ? \"\" : \"/\"}${url}`\n}\n\nexport async function getAdminUsers() {\n  const res = await request<ApiResponse<{ items: AdminUser[] }>>(\"/users\")\n  return res.data.items\n}\n\nexport async function updateUserApi(\n  id: string,\n  payload: Partial<{\n    role: \"user\" | \"publisher\" | \"admin\"\n    isActive: boolean\n  }>\n) {\n  const res = await request<ApiResponse<{ user: AdminUser }>>(`/users/${id}`, {\n    method: \"PATCH\",\n    body: JSON.stringify(payload),\n  })\n  return res.data.user\n}\n\nexport async function createPostApi(payload: {\n  title: string\n  excerpt: string\n  content: string\n  featuredImage?: string\n  category?: string\n  topics?: string[]\n  visibility?: \"public\" | \"private\"\n  status?: \"draft\" | \"pending\" | \"published\"\n  publishedAt?: string\n}) {\n  const res = await request<ApiResponse<{ post: BackendPost }>>(\"/posts\", {\n    method: \"POST\",\n    body: JSON.stringify(payload),\n  })\n  return mapDashboardPost(res.data.post)\n}\n\nexport async function updatePostApi(\n  id: string,\n  payload: Partial<{\n    title: string\n    excerpt: string\n    content: string\n    featuredImage?: string\n    category?: string\n    topics?: string[]\n    visibility?: \"public\" | \"private\"\n    status?: \"draft\" | \"pending\" | \"published\" | \"rejected\"\n    publishedAt?: string\n  }>\n) {\n  const res = await request<ApiResponse<{ post: BackendPost }>>(`/posts/${id}`, {\n    method: \"PATCH\",\n    body: JSON.stringify(payload),\n  })\n  return mapDashboardPost(res.data.post)\n}\n\nexport async function updatePostStatusApi(\n  id: string,\n  status: \"draft\" | \"pending\" | \"published\" | \"rejected\"\n) {\n  const res = await request<ApiResponse<{ post: BackendPost }>>(`/posts/${id}`, {\n    method: \"PATCH\",\n    body: JSON.stringify({ status }),\n  })\n  return mapAdminPost(res.data.post)\n}\n\nexport async function deletePostApi(id: string) {\n  await request<ApiResponse<{ message: string }>>(`/posts/${id}`, {\n    method: \"DELETE\",\n  })\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;AAGA,MAAM,WAAW,iEAAmC;AACpD,MAAM,aAAa,SAAS,OAAO,CAAC,aAAa;AA2DjD,SAAS,eAAe,UAAmB;IACzC,IAAI,CAAC,YAAY,OAAO;IACxB,MAAM,IAAI,IAAI,KAAK;IACnB,IAAI,OAAO,KAAK,CAAC,EAAE,OAAO,KAAK,OAAO;IACtC,OAAO,EAAE,kBAAkB,CAAC;AAC9B;AAEA,SAAS,oBAAoB,IAAa;IACxC,MAAM,MAA8B;QAClC,SAAS;QACT,YAAY;QACZ,OAAO;QACP,aAAa;QACb,SAAS;QACT,QAAQ;IACV;IACA,OAAO,GAAG,CAAC,QAAQ,GAAG,IAAI;AAC5B;AAEA,SAAS,QAAQ,IAAiB;IAChC,OAAO;QACL,IAAI,KAAK,GAAG;QACZ,OAAO,KAAK,KAAK;QACjB,SAAS,KAAK,OAAO,IAAI;QACzB,aAAa,KAAK,OAAO,IAAI;QAC7B,UAAU,KAAK,QAAQ,EAAE,QAAQ;QACjC,cAAc,KAAK,QAAQ,EAAE,QAAQ;QACrC,eAAe,oBAAoB,KAAK,QAAQ,EAAE;QAClD,OAAO,KAAK,aAAa,IAAI;QAC7B,QAAQ,KAAK,MAAM,EAAE,QAAQ;QAC7B,cACE,KAAK,MAAM,EAAE,UACb;QACF,MAAM,eAAe,KAAK,SAAS;QACnC,OAAO,OAAO,KAAK,UAAU,IAAI;QACjC,OAAO,KAAK,UAAU,IAAI;QAC1B,UAAU,KAAK,aAAa,IAAI;IAClC;AACF;AAqEA,SAAS,iBAAiB,IAAiB;IACzC,OAAO;QACL,IAAI,KAAK,GAAG;QACZ,OAAO,KAAK,KAAK;QACjB,SAAS,KAAK,OAAO,IAAI;QACzB,SAAS,KAAK,OAAO,IAAI;QACzB,QAAQ,KAAK,MAAM,IAAI;QACvB,YAAY,KAAK,UAAU,IAAI;QAC/B,UAAU,KAAK,QAAQ,EAAE,QAAQ;QACjC,YAAY,KAAK,QAAQ,EAAE;QAC3B,OAAO,KAAK,aAAa,IAAI;QAC7B,OAAO,OAAO,KAAK,UAAU,IAAI;QACjC,OAAO,KAAK,UAAU,IAAI;QAC1B,UAAU,KAAK,aAAa,IAAI;QAChC,WAAW,KAAK,SAAS,IAAI,IAAI,OAAO,WAAW;QACnD,aAAa,KAAK,WAAW,IAAI;QACjC,QAAQ,CAAC,KAAK,MAAM,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,GAAG;IAC9C;AACF;AAEA,SAAS,aAAa,IAAiB;IACrC,OAAO;QACL,IAAI,KAAK,GAAG;QACZ,OAAO,KAAK,KAAK;QACjB,SAAS,KAAK,OAAO,IAAI;QACzB,QAAQ,KAAK,MAAM,IAAI;QACvB,OAAO,KAAK,aAAa,IAAI;QAC7B,OAAO,OAAO,KAAK,UAAU,IAAI;QACjC,UAAU,KAAK,aAAa,IAAI;QAChC,UAAU,KAAK,QAAQ,EAAE,QAAQ;QACjC,cAAc,KAAK,QAAQ,EAAE,QAAQ;QACrC,QAAQ,KAAK,MAAM,EAAE,QAAQ;QAC7B,cACE,KAAK,MAAM,EAAE,UACb;QACF,WAAW,KAAK,SAAS,IAAI,IAAI,OAAO,WAAW;IACrD;AACF;AAEA,eAAe,QAAW,IAAY,EAAE,IAAkB;IACxD,MAAM,QAAQ,IAAA,6HAAc;IAC5B,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C,GAAG,IAAI;QACP,SAAS;YACP,gBAAgB;YAChB,GAAI,QAAQ;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC,IAAI,CAAC,CAAC;YACrD,GAAI,MAAM,WAAW,CAAC,CAAC;QACzB;QACA,OAAO;IACT;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;IAC1C,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,MAAM,WAAW;IACnC;IACA,OAAO;AACT;AAEA,SAAS,aAAa,IAAU;IAC9B,OAAO,IAAI,QAAQ,CAAC,SAAS;QAC3B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,MAAM,MAAM,OAAO,MAAM;YACzB,IAAI,OAAO,QAAQ,UAAU;gBAC3B,OAAO,IAAI,MAAM;gBACjB;YACF;YACA,MAAM,SAAS,IAAI,QAAQ,CAAC,OAAO,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;YACvD,QAAQ;QACV;QACA,OAAO,OAAO,GAAG,IAAM,OAAO,IAAI,MAAM;QACxC,OAAO,aAAa,CAAC;IACvB;AACF;AAEO,eAAe,SAAS,KAAa,EAAE,QAAgB;IAC5D,MAAM,MAAM,MAAM,QAMhB,eAAe;QACf,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAS;IACzC;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,YAAY,IAAY,EAAE,KAAa,EAAE,QAAgB;IAC7E,MAAM,MAAM,MAAM,QAMhB,kBAAkB;QAClB,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YAAE;YAAM;YAAO;QAAS;IAC/C;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,SAAS,MAM9B;IACC,MAAM,SAAS,IAAI;IACnB,IAAI,QAAQ,UAAU,OAAO,GAAG,CAAC,YAAY,OAAO,QAAQ;IAC5D,IAAI,QAAQ,OAAO,OAAO,GAAG,CAAC,SAAS,OAAO,KAAK;IACnD,IAAI,QAAQ,GAAG,OAAO,GAAG,CAAC,KAAK,OAAO,CAAC;IACvC,IAAI,QAAQ,QAAQ,OAAO,GAAG,CAAC,UAAU,OAAO,MAAM;IACtD,IAAI,QAAQ,QAAQ,OAAO,GAAG,CAAC,UAAU,OAAO,MAAM;IACtD,MAAM,SAAS,OAAO,QAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IAE7D,MAAM,MAAM,MAAM,QAA+C,CAAC,MAAM,EAAE,QAAQ;IAClF,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AAC5B;AAEO,eAAe,YAAY,EAAU;IAC1C,MAAM,MAAM,MAAM,QAA4C,CAAC,OAAO,EAAE,IAAI;IAC5E,OAAO,QAAQ,IAAI,IAAI,CAAC,IAAI;AAC9B;AAEO,eAAe,qBAAqB,EAAU;IACnD,MAAM,MAAM,MAAM,QAA4C,CAAC,OAAO,EAAE,IAAI;IAC5E,OAAO,iBAAiB,IAAI,IAAI,CAAC,IAAI;AACvC;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,QAChB;IAEF,OAAO,IAAI,IAAI,CAAC,UAAU;AAC5B;AAEO,eAAe,kBAAkB,OAOvC;IACC,MAAM,MAAM,MAAM,QAChB,eACA;QACE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IAEF,OAAO,IAAI,IAAI,CAAC,QAAQ;AAC1B;AAEO,eAAe,kBACpB,EAAU,EACV,OAOE;IAEF,MAAM,MAAM,MAAM,QAChB,CAAC,YAAY,EAAE,IAAI,EACnB;QACE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IAEF,OAAO,IAAI,IAAI,CAAC,QAAQ;AAC1B;AAEO,eAAe,kBAAkB,EAAU;IAChD,MAAM,QAA0C,CAAC,YAAY,EAAE,IAAI,EAAE;QACnE,QAAQ;IACV;AACF;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,QAAiD;IACnE,OAAO,IAAI,IAAI,CAAC,MAAM;AACxB;AAEO,eAAe,eAAe,OAQpC;IACC,MAAM,MAAM,MAAM,QAA8C,WAAW;QACzE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI,CAAC,KAAK;AACvB;AAEO,eAAe,eACpB,EAAU,EACV,OAQE;IAEF,MAAM,MAAM,MAAM,QAA8C,CAAC,QAAQ,EAAE,IAAI,EAAE;QAC/E,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI,CAAC,KAAK;AACvB;AAEO,eAAe,eAAe,EAAU;IAC7C,MAAM,QAA0C,CAAC,QAAQ,EAAE,IAAI,EAAE;QAC/D,QAAQ;IACV;AACF;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,QAChB;IAEF,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AAC5B;AAEO,eAAe,kBAAkB,MAAc;IACpD,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,SAAS,CAAC,EAC3B;QACE,QAAQ;IACV;IAEF,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,cAAc,MAAc;IAChD,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,KAAK,CAAC,EACvB;QACE,QAAQ;IACV;IAEF,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,gBAAgB,MAAc;IAClD,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,WAAW,CAAC;IAE/B,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,eAAe,MAAc;IACjD,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,SAAS,CAAC;IAE7B,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;YACnC,IAAI,EAAE,GAAG;YACT,SAAS,EAAE,OAAO;YAClB,WAAW,EAAE,SAAS;YACtB,MAAM;gBACJ,MAAM,EAAE,IAAI,EAAE,QAAQ;gBACtB,QACE,EAAE,IAAI,EAAE,UACR;YACJ;QACF,CAAC;AACH;AAEO,eAAe,cAAc,MAAc,EAAE,OAAe;IACjE,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,SAAS,CAAC,EAC3B;QACE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YAAE;QAAQ;IACjC;IAEF,MAAM,IAAI,IAAI,IAAI,CAAC,OAAO;IAC1B,MAAM,SAAsB;QAC1B,IAAI,EAAE,GAAG;QACT,SAAS,EAAE,OAAO;QAClB,WAAW,EAAE,SAAS;QACtB,MAAM;YACJ,MAAM,EAAE,IAAI,EAAE,QAAQ;YACtB,QACE,EAAE,IAAI,EAAE,UACR;QACJ;IACF;IACA,OAAO;AACT;AAEO,eAAe,WAAW,QAAgB;IAC/C,MAAM,SAAS,IAAI;IACnB,OAAO,GAAG,CAAC,UAAU;IACrB,OAAO,GAAG,CAAC,UAAU;IACrB,MAAM,MAAM,MAAM,QAChB,CAAC,OAAO,EAAE,OAAO,QAAQ,IAAI;IAE/B,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AAC5B;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,QAChB;IAEF,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;AAC5B;AAEO,eAAe,eAAe,IAAU,EAAE,MAAoB;IACnE,MAAM,aAAa,MAAM,aAAa;IACtC,MAAM,MAAM,MAAM,QAAsC,kBAAkB;QACxE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YACnB,UAAU,KAAK,IAAI;YACnB,UAAU,KAAK,IAAI;YACnB;YACA;QACF;IACF;IAEA,MAAM,MAAM,IAAI,IAAI,CAAC,GAAG,IAAI;IAC5B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,IAAI,IAAI,UAAU,CAAC,cAAc,IAAI,UAAU,CAAC,aAAa,OAAO;IACpE,OAAO,GAAG,aAAa,IAAI,UAAU,CAAC,OAAO,KAAK,MAAM,KAAK;AAC/D;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,QAA6C;IAC/D,OAAO,IAAI,IAAI,CAAC,KAAK;AACvB;AAEO,eAAe,cACpB,EAAU,EACV,OAGE;IAEF,MAAM,MAAM,MAAM,QAA0C,CAAC,OAAO,EAAE,IAAI,EAAE;QAC1E,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe,cAAc,OAUnC;IACC,MAAM,MAAM,MAAM,QAA4C,UAAU;QACtE,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,iBAAiB,IAAI,IAAI,CAAC,IAAI;AACvC;AAEO,eAAe,cACpB,EAAU,EACV,OAUE;IAEF,MAAM,MAAM,MAAM,QAA4C,CAAC,OAAO,EAAE,IAAI,EAAE;QAC5E,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,iBAAiB,IAAI,IAAI,CAAC,IAAI;AACvC;AAEO,eAAe,oBACpB,EAAU,EACV,MAAsD;IAEtD,MAAM,MAAM,MAAM,QAA4C,CAAC,OAAO,EAAE,IAAI,EAAE;QAC5E,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;YAAE;QAAO;IAChC;IACA,OAAO,aAAa,IAAI,IAAI,CAAC,IAAI;AACnC;AAEO,eAAe,cAAc,EAAU;IAC5C,MAAM,QAA0C,CAAC,OAAO,EAAE,IAAI,EAAE;QAC9D,QAAQ;IACV;AACF"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///Users/ochirdari/Desktop/datanewsapp/datavoronoi/components/editor/tiptap-editor.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEditor, EditorContent, BubbleMenu } from \"@tiptap/react\"\nimport StarterKit from \"@tiptap/starter-kit\"\nimport Underline from \"@tiptap/extension-underline\"\nimport Link from \"@tiptap/extension-link\"\nimport TextAlign from \"@tiptap/extension-text-align\"\nimport Placeholder from \"@tiptap/extension-placeholder\"\nimport TiptapImage from \"@tiptap/extension-image\"\nimport {\n  Bold,\n  Italic,\n  Underline as UnderlineIcon,\n  Strikethrough,\n  Code,\n  Heading1,\n  Heading2,\n  Heading3,\n  List,\n  ListOrdered,\n  Quote,\n  Undo,\n  Redo,\n  Link as LinkIcon,\n  Unlink,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  ImageIcon,\n  Minus,\n  Code2,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { useCallback, useEffect, useRef, useState, type ChangeEvent } from \"react\"\nimport { uploadImageApi } from \"@/lib/api\"\n\ninterface TiptapEditorProps {\n  content?: string\n  onChange?: (content: string) => void\n  placeholder?: string\n}\n\nexport function TiptapEditor({\n  content = \"\",\n  onChange,\n  placeholder = \"Энд нийтлэлийн агуулгаа бичнэ үү...\",\n}: TiptapEditorProps) {\n  const [linkUrl, setLinkUrl] = useState(\"\")\n  const [showLinkInput, setShowLinkInput] = useState(false)\n  const [isUploadingImage, setIsUploadingImage] = useState(false)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n\n  const editor = useEditor({\n    extensions: [\n      StarterKit.configure({\n        heading: {\n          levels: [1, 2, 3],\n        },\n      }),\n      Underline,\n      Link.configure({\n        openOnClick: false,\n        HTMLAttributes: {\n          class: \"text-primary underline\",\n        },\n      }),\n      TextAlign.configure({\n        types: [\"heading\", \"paragraph\"],\n      }),\n      Placeholder.configure({\n        placeholder,\n      }),\n      TiptapImage.configure({\n        HTMLAttributes: {\n          class: \"rounded-lg max-w-full h-auto\",\n        },\n      }),\n    ],\n    content,\n    editorProps: {\n      attributes: {\n        class:\n          \"prose prose-sm sm:prose-base dark:prose-invert max-w-none focus:outline-none min-h-[400px] px-4 py-3\",\n      },\n      handlePaste: (view, event) => {\n        const files = event.clipboardData?.files\n        if (!files || files.length === 0) return false\n\n        const imageFile = Array.from(files).find((file) =>\n          file.type.startsWith(\"image/\")\n        )\n        if (!imageFile) return false\n\n        setIsUploadingImage(true)\n        uploadImageApi(imageFile, \"editor\")\n          .then((url) => {\n            view.dispatch(view.state.tr)\n            editor?.chain().focus().setImage({ src: url }).run()\n          })\n          .finally(() => {\n            setIsUploadingImage(false)\n          })\n        return true\n      },\n    },\n    onUpdate: ({ editor }) => {\n      onChange?.(editor.getHTML())\n    },\n  })\n\n  useEffect(() => {\n    if (!editor) return\n    const current = editor.getHTML()\n    if (content !== current) {\n      editor.commands.setContent(content || \"\", false)\n    }\n  }, [content, editor])\n\n  const addImage = useCallback(() => {\n    fileInputRef.current?.click()\n  }, [])\n\n  const onSelectImage = useCallback(\n    async (e: ChangeEvent<HTMLInputElement>) => {\n      const file = e.target.files?.[0]\n      if (!file || !editor) return\n      const input = e.currentTarget\n      setIsUploadingImage(true)\n      try {\n        const url = await uploadImageApi(file, \"editor\")\n        editor.chain().focus().setImage({ src: url }).run()\n      } finally {\n        setIsUploadingImage(false)\n        input.value = \"\"\n      }\n    },\n    [editor]\n  )\n\n  const setLink = useCallback(() => {\n    if (!editor) return\n\n    if (linkUrl === \"\") {\n      editor.chain().focus().extendMarkRange(\"link\").unsetLink().run()\n      return\n    }\n\n    editor\n      .chain()\n      .focus()\n      .extendMarkRange(\"link\")\n      .setLink({ href: linkUrl })\n      .run()\n\n    setLinkUrl(\"\")\n    setShowLinkInput(false)\n  }, [editor, linkUrl])\n\n  if (!editor) {\n    return null\n  }\n\n  const ToolbarButton = ({\n    onClick,\n    isActive = false,\n    disabled = false,\n    children,\n    title,\n  }: {\n    onClick: () => void\n    isActive?: boolean\n    disabled?: boolean\n    children: React.ReactNode\n    title?: string\n  }) => (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n      title={title}\n      className={cn(\n        \"flex h-8 w-8 items-center justify-center rounded-md transition-colors\",\n        isActive\n          ? \"bg-primary text-primary-foreground\"\n          : \"text-muted-foreground hover:bg-secondary hover:text-foreground\",\n        disabled && \"cursor-not-allowed opacity-50\"\n      )}\n    >\n      {children}\n    </button>\n  )\n\n  const ToolbarDivider = () => <div className=\"mx-1 h-6 w-px bg-border\" />\n\n  return (\n    <div className=\"rounded-lg border border-border bg-card\">\n      {/* Toolbar */}\n      <div className=\"flex flex-wrap items-center gap-0.5 border-b border-border p-2\">\n        {/* Undo/Redo */}\n        <ToolbarButton\n          onClick={() => editor.chain().focus().undo().run()}\n          disabled={!editor.can().undo()}\n          title=\"Буцаах\"\n        >\n          <Undo className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().redo().run()}\n          disabled={!editor.can().redo()}\n          title=\"Дахин хийх\"\n        >\n          <Redo className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Headings */}\n        <ToolbarButton\n          onClick={() =>\n            editor.chain().focus().toggleHeading({ level: 1 }).run()\n          }\n          isActive={editor.isActive(\"heading\", { level: 1 })}\n          title=\"Гарчиг 1\"\n        >\n          <Heading1 className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() =>\n            editor.chain().focus().toggleHeading({ level: 2 }).run()\n          }\n          isActive={editor.isActive(\"heading\", { level: 2 })}\n          title=\"Гарчиг 2\"\n        >\n          <Heading2 className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() =>\n            editor.chain().focus().toggleHeading({ level: 3 }).run()\n          }\n          isActive={editor.isActive(\"heading\", { level: 3 })}\n          title=\"Гарчиг 3\"\n        >\n          <Heading3 className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Basic Formatting */}\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleBold().run()}\n          isActive={editor.isActive(\"bold\")}\n          title=\"Тод\"\n        >\n          <Bold className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleItalic().run()}\n          isActive={editor.isActive(\"italic\")}\n          title=\"Налуу\"\n        >\n          <Italic className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleUnderline().run()}\n          isActive={editor.isActive(\"underline\")}\n          title=\"Доогуур зураас\"\n        >\n          <UnderlineIcon className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleStrike().run()}\n          isActive={editor.isActive(\"strike\")}\n          title=\"Дундуур зураас\"\n        >\n          <Strikethrough className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleCode().run()}\n          isActive={editor.isActive(\"code\")}\n          title=\"Код\"\n        >\n          <Code className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Alignment */}\n        <ToolbarButton\n          onClick={() => editor.chain().focus().setTextAlign(\"left\").run()}\n          isActive={editor.isActive({ textAlign: \"left\" })}\n          title=\"Зүүн\"\n        >\n          <AlignLeft className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().setTextAlign(\"center\").run()}\n          isActive={editor.isActive({ textAlign: \"center\" })}\n          title=\"Төв\"\n        >\n          <AlignCenter className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().setTextAlign(\"right\").run()}\n          isActive={editor.isActive({ textAlign: \"right\" })}\n          title=\"Баруун\"\n        >\n          <AlignRight className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().setTextAlign(\"justify\").run()}\n          isActive={editor.isActive({ textAlign: \"justify\" })}\n          title=\"Тэгшлэх\"\n        >\n          <AlignJustify className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Lists */}\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleBulletList().run()}\n          isActive={editor.isActive(\"bulletList\")}\n          title=\"Жагсаалт\"\n        >\n          <List className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleOrderedList().run()}\n          isActive={editor.isActive(\"orderedList\")}\n          title=\"Дугаарласан жагсаалт\"\n        >\n          <ListOrdered className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Block Elements */}\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleBlockquote().run()}\n          isActive={editor.isActive(\"blockquote\")}\n          title=\"Ишлэл\"\n        >\n          <Quote className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().toggleCodeBlock().run()}\n          isActive={editor.isActive(\"codeBlock\")}\n          title=\"Код блок\"\n        >\n          <Code2 className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <ToolbarButton\n          onClick={() => editor.chain().focus().setHorizontalRule().run()}\n          title=\"Хэвтээ шугам\"\n        >\n          <Minus className=\"h-4 w-4\" />\n        </ToolbarButton>\n\n        <ToolbarDivider />\n\n        {/* Link */}\n        <div className=\"relative\">\n          <ToolbarButton\n            onClick={() => setShowLinkInput(!showLinkInput)}\n            isActive={editor.isActive(\"link\")}\n            title=\"Холбоос\"\n          >\n            <LinkIcon className=\"h-4 w-4\" />\n          </ToolbarButton>\n          {showLinkInput && (\n            <div className=\"absolute left-0 top-full z-10 mt-1 flex items-center gap-2 rounded-lg border border-border bg-card p-2 shadow-lg\">\n              <input\n                type=\"url\"\n                placeholder=\"https://...\"\n                value={linkUrl}\n                onChange={(e) => setLinkUrl(e.target.value)}\n                className=\"w-48 rounded-md border border-border bg-background px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n                onKeyDown={(e) => e.key === \"Enter\" && setLink()}\n              />\n              <button\n                onClick={setLink}\n                className=\"rounded-md bg-primary px-2 py-1 text-xs font-medium text-primary-foreground\"\n              >\n                Нэмэх\n              </button>\n            </div>\n          )}\n        </div>\n        {editor.isActive(\"link\") && (\n          <ToolbarButton\n            onClick={() => editor.chain().focus().unsetLink().run()}\n            title=\"Холбоос устгах\"\n          >\n            <Unlink className=\"h-4 w-4\" />\n          </ToolbarButton>\n        )}\n\n        {/* Image */}\n        <ToolbarButton onClick={addImage} title=\"Зураг\">\n          <ImageIcon className=\"h-4 w-4\" />\n        </ToolbarButton>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          className=\"hidden\"\n          accept=\"image/*\"\n          onChange={onSelectImage}\n        />\n      </div>\n\n      {/* Bubble Menu */}\n      {editor && (\n        <BubbleMenu\n          editor={editor}\n          tippyOptions={{ duration: 100 }}\n          className=\"flex items-center gap-0.5 rounded-lg border border-border bg-card p-1 shadow-lg\"\n        >\n          <ToolbarButton\n            onClick={() => editor.chain().focus().toggleBold().run()}\n            isActive={editor.isActive(\"bold\")}\n          >\n            <Bold className=\"h-3.5 w-3.5\" />\n          </ToolbarButton>\n          <ToolbarButton\n            onClick={() => editor.chain().focus().toggleItalic().run()}\n            isActive={editor.isActive(\"italic\")}\n          >\n            <Italic className=\"h-3.5 w-3.5\" />\n          </ToolbarButton>\n          <ToolbarButton\n            onClick={() => editor.chain().focus().toggleUnderline().run()}\n            isActive={editor.isActive(\"underline\")}\n          >\n            <UnderlineIcon className=\"h-3.5 w-3.5\" />\n          </ToolbarButton>\n        </BubbleMenu>\n      )}\n\n      {/* Editor Content */}\n      <EditorContent editor={editor} />\n      {isUploadingImage && (\n        <div className=\"border-t border-border px-4 py-2 text-xs text-muted-foreground\">\n          Зураг upload хийж байна...\n        </div>\n      )}\n\n      {/* Character Count */}\n      <div className=\"flex items-center justify-between border-t border-border px-4 py-2 text-xs text-muted-foreground\">\n        <span>\n          {editor.storage.characterCount?.characters?.() ?? 0} тэмдэгт\n        </span>\n        <span>{editor.storage.characterCount?.words?.() ?? 0} үг</span>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1133, "column": 0}, "map": {"version":3,"sources":["file:///Users/ochirdari/Desktop/datanewsapp/datavoronoi/app/dashboard/posts/%5Bid%5D/edit/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport {\n  ArrowLeft,\n  Save,\n  Send,\n  ImageIcon,\n  X,\n  Tag,\n  Hash,\n  Globe,\n  Lock,\n  ChevronDown,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { TiptapEditor } from \"@/components/editor/tiptap-editor\"\nimport {\n  getCategories,\n  getDashboardPostById,\n  getTopics,\n  uploadImageApi,\n  updatePostApi,\n  type BackendCategory,\n  type BackendTopic,\n} from \"@/lib/api\"\n\nexport default function EditPostPage() {\n  const params = useParams()\n  const id = params.id as string\n  const router = useRouter()\n\n  const [title, setTitle] = useState(\"\")\n  const [excerpt, setExcerpt] = useState(\"\")\n  const [content, setContent] = useState(\"\")\n  const [featuredImage, setFeaturedImage] = useState(\"\")\n  const [selectedCategory, setSelectedCategory] = useState(\"\")\n  const [selectedTopics, setSelectedTopics] = useState<string[]>([])\n  const [visibility, setVisibility] = useState<\"public\" | \"private\">(\"public\")\n  const [isSaving, setIsSaving] = useState(false)\n  const [isUploadingImage, setIsUploadingImage] = useState(false)\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false)\n  const [showTopicsDropdown, setShowTopicsDropdown] = useState(false)\n  const [error, setError] = useState(\"\")\n  const [categories, setCategories] = useState<BackendCategory[]>([])\n  const [topics, setTopics] = useState<BackendTopic[]>([])\n\n  useEffect(() => {\n    Promise.all([getDashboardPostById(id), getCategories(), getTopics()])\n      .then(([post, cats, tpcs]) => {\n        setTitle(post.title)\n        setExcerpt(post.excerpt)\n        setContent(post.content)\n        setFeaturedImage(post.image)\n        setSelectedCategory(post.categoryId || \"\")\n        setSelectedTopics(post.topics)\n        setVisibility(post.visibility)\n        setCategories(cats)\n        setTopics(tpcs)\n      })\n      .catch((err) => {\n        setError(err instanceof Error ? err.message : \"Өгөгдөл ачаалахад алдаа\")\n      })\n  }, [id])\n\n  const save = async (status: \"draft\" | \"published\") => {\n    if (!title.trim() || !content.trim()) {\n      setError(\"Гарчиг болон агуулга шаардлагатай\")\n      return\n    }\n\n    setIsSaving(true)\n    setError(\"\")\n    try {\n      await updatePostApi(id, {\n        title: title.trim(),\n        excerpt: excerpt.trim(),\n        content,\n        featuredImage,\n        category: selectedCategory || undefined,\n        topics: selectedTopics,\n        visibility,\n        status,\n      })\n      router.push(\"/dashboard/posts\")\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"Хадгалах үед алдаа\")\n    } finally {\n      setIsSaving(false)\n    }\n  }\n\n  const toggleTopic = (topicId: string) => {\n    setSelectedTopics((prev) =>\n      prev.includes(topicId) ? prev.filter((t) => t !== topicId) : [...prev, topicId]\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-30 border-b border-border bg-card/95 backdrop-blur\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center gap-4\">\n            <Link\n              href=\"/dashboard/posts\"\n              className=\"flex h-9 w-9 items-center justify-center rounded-md text-muted-foreground hover:bg-secondary hover:text-foreground\"\n            >\n              <ArrowLeft className=\"h-5 w-5\" />\n            </Link>\n            <h1 className=\"text-lg font-semibold text-foreground\">Нийтлэл засах</h1>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => save(\"draft\")}\n              disabled={isSaving}\n              className=\"flex items-center gap-2 rounded-lg border border-border px-4 py-2 text-sm font-medium text-foreground transition-colors hover:bg-secondary disabled:opacity-50\"\n            >\n              <Save className=\"h-4 w-4\" />\n              Ноорог хадгалах\n            </button>\n            <button\n              onClick={() => save(\"published\")}\n              disabled={isSaving}\n              className=\"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90\"\n            >\n              <Send className=\"h-4 w-4\" />\n              Нийтлэх\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"mx-auto max-w-7xl px-6 py-8\">\n        {error && (\n          <div className=\"mb-4 rounded-lg bg-destructive/10 p-3 text-sm text-destructive\">{error}</div>\n        )}\n        <div className=\"grid gap-8 lg:grid-cols-3\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            <input\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Нийтлэлийн гарчиг...\"\n              className=\"w-full border-none bg-transparent text-3xl font-bold text-foreground placeholder:text-muted-foreground/50 focus:outline-none\"\n            />\n\n            <div>\n              <label className=\"mb-2 block text-sm font-medium text-foreground\">Товч тайлбар</label>\n              <textarea\n                value={excerpt}\n                onChange={(e) => setExcerpt(e.target.value)}\n                rows={3}\n                className=\"w-full resize-none rounded-lg border border-border bg-card px-4 py-3 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring\"\n              />\n            </div>\n\n            <div>\n              <label className=\"mb-2 block text-sm font-medium text-foreground\">Агуулга</label>\n              <TiptapEditor content={content} onChange={setContent} />\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            <div className=\"rounded-xl border border-border bg-card p-5\">\n              <h3 className=\"mb-4 text-sm font-semibold text-foreground\">Онцлох зураг</h3>\n              {featuredImage ? (\n                <div className=\"relative aspect-video overflow-hidden rounded-lg\">\n                  <img src={featuredImage} alt=\"Featured\" className=\"h-full w-full object-cover\" />\n                  <button\n                    onClick={() => setFeaturedImage(\"\")}\n                    className=\"absolute right-2 top-2 flex h-7 w-7 items-center justify-center rounded-full bg-background/80 text-foreground hover:bg-background\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              ) : (\n                <label className=\"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border bg-muted/30 transition-colors hover:border-primary hover:bg-muted/50\">\n                  <ImageIcon className=\"h-10 w-10 text-muted-foreground\" />\n                  <span className=\"mt-2 text-sm text-muted-foreground\">Зураг оруулах</span>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"hidden\"\n                    onChange={async (e) => {\n                      const file = e.target.files?.[0]\n                      if (!file) return\n                      const input = e.currentTarget\n                      setIsUploadingImage(true)\n                      setError(\"\")\n                      try {\n                        const uploadedUrl = await uploadImageApi(file, \"posts\")\n                        setFeaturedImage(uploadedUrl)\n                      } catch (err) {\n                        setError(err instanceof Error ? err.message : \"Зураг upload хийхэд алдаа гарлаа\")\n                      } finally {\n                        setIsUploadingImage(false)\n                        input.value = \"\"\n                      }\n                    }}\n                  />\n                </label>\n              )}\n              {featuredImage && (\n                <label className=\"mt-3 inline-flex cursor-pointer items-center gap-2 rounded-md border border-border px-3 py-1.5 text-xs text-foreground hover:bg-secondary\">\n                  Зураг солих\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    className=\"hidden\"\n                    onChange={async (e) => {\n                      const file = e.target.files?.[0]\n                      if (!file) return\n                      const input = e.currentTarget\n                      setIsUploadingImage(true)\n                      setError(\"\")\n                      try {\n                        const uploadedUrl = await uploadImageApi(file, \"posts\")\n                        setFeaturedImage(uploadedUrl)\n                      } catch (err) {\n                        setError(err instanceof Error ? err.message : \"Зураг upload хийхэд алдаа гарлаа\")\n                      } finally {\n                        setIsUploadingImage(false)\n                        input.value = \"\"\n                      }\n                    }}\n                  />\n                </label>\n              )}\n              {isUploadingImage && (\n                <p className=\"mt-2 text-xs text-muted-foreground\">Зураг upload хийж байна...</p>\n              )}\n            </div>\n\n            <div className=\"rounded-xl border border-border bg-card p-5\">\n              <h3 className=\"mb-4 text-sm font-semibold text-foreground\">Ангилал</h3>\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowCategoryDropdown(!showCategoryDropdown)}\n                  className=\"flex w-full items-center justify-between rounded-lg border border-border bg-background px-4 py-2.5 text-sm text-foreground\"\n                >\n                  <span className=\"flex items-center gap-2\">\n                    <Tag className=\"h-4 w-4 text-muted-foreground\" />\n                    {selectedCategory ? categories.find((c) => c._id === selectedCategory)?.name : \"Ангилал сонгох\"}\n                  </span>\n                  <ChevronDown className={cn(\"h-4 w-4 text-muted-foreground transition-transform\", showCategoryDropdown && \"rotate-180\")} />\n                </button>\n                {showCategoryDropdown && (\n                  <div className=\"absolute left-0 right-0 top-full z-10 mt-1 rounded-lg border border-border bg-card py-1 shadow-lg\">\n                    {categories.map((cat) => (\n                      <button\n                        key={cat._id}\n                        onClick={() => {\n                          setSelectedCategory(cat._id)\n                          setShowCategoryDropdown(false)\n                        }}\n                        className={cn(\n                          \"flex w-full items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted\",\n                          selectedCategory === cat._id ? \"bg-primary/10 text-primary\" : \"text-foreground\"\n                        )}\n                      >\n                        <span className=\"h-2 w-2 rounded-full bg-primary\" />\n                        {cat.name}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"rounded-xl border border-border bg-card p-5\">\n              <h3 className=\"mb-4 text-sm font-semibold text-foreground\">Сэдэв</h3>\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowTopicsDropdown(!showTopicsDropdown)}\n                  className=\"flex w-full items-center justify-between rounded-lg border border-border bg-background px-4 py-2.5 text-sm text-foreground\"\n                >\n                  <span className=\"flex items-center gap-2\">\n                    <Hash className=\"h-4 w-4 text-muted-foreground\" />\n                    {selectedTopics.length > 0 ? `${selectedTopics.length} сэдэв сонгосон` : \"Сэдэв сонгох\"}\n                  </span>\n                  <ChevronDown className={cn(\"h-4 w-4 text-muted-foreground transition-transform\", showTopicsDropdown && \"rotate-180\")} />\n                </button>\n                {showTopicsDropdown && (\n                  <div className=\"absolute left-0 right-0 top-full z-10 mt-1 max-h-48 overflow-y-auto rounded-lg border border-border bg-card py-1 shadow-lg\">\n                    {topics.map((topic) => (\n                      <button\n                        key={topic._id}\n                        onClick={() => toggleTopic(topic._id)}\n                        className={cn(\n                          \"flex w-full items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted\",\n                          selectedTopics.includes(topic._id) ? \"bg-primary/10 text-primary\" : \"text-foreground\"\n                        )}\n                      >\n                        {topic.name}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"rounded-xl border border-border bg-card p-5\">\n              <h3 className=\"mb-4 text-sm font-semibold text-foreground\">Нийтлэх тохиргоо</h3>\n              <div className=\"space-y-3\">\n                <label className=\"flex cursor-pointer items-center gap-3 rounded-lg border border-border p-3 transition-colors hover:bg-muted/30\">\n                  <input\n                    type=\"radio\"\n                    name=\"visibility\"\n                    checked={visibility === \"public\"}\n                    onChange={() => setVisibility(\"public\")}\n                    className=\"h-4 w-4 text-primary\"\n                  />\n                  <Globe className=\"h-4 w-4 text-muted-foreground\" />\n                  <p className=\"text-sm font-medium text-foreground\">Нийтэд</p>\n                </label>\n                <label className=\"flex cursor-pointer items-center gap-3 rounded-lg border border-border p-3 transition-colors hover:bg-muted/30\">\n                  <input\n                    type=\"radio\"\n                    name=\"visibility\"\n                    checked={visibility === \"private\"}\n                    onChange={() => setVisibility(\"private\")}\n                    className=\"h-4 w-4 text-primary\"\n                  />\n                  <Lock className=\"h-4 w-4 text-muted-foreground\" />\n                  <p className=\"text-sm font-medium text-foreground\">Хувийн</p>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}